# 🚀 品遇小程序开发工作流指南

## 📋 概述

本指南介绍如何使用VS Code插件和微信开发者工具进行高效的小程序开发，实现双端同步测试的完整工作流。

## 🛠️ 环境配置

### 已安装的VS Code插件
- ✅ `minapp-vscode` - 小程序开发支持
- ✅ `tongyi-lingma` - AI代码助手
- ✅ `prettier-vscode` - 代码格式化
- ✅ `auto-rename-tag` - 标签自动重命名
- ✅ `builder.builder` - 构建工具
- ✅ `es6-string-html` - HTML字符串高亮
- ✅ `liveserver` - 实时预览服务器

### 项目配置文件
- 📄 `.vscode/settings.json` - VS Code工作区设置
- 📄 `.vscode/tasks.json` - 自动化任务配置
- 📄 `.vscode/launch.json` - 调试配置
- 📄 `.eslintrc.js` - 代码规范配置
- 📄 `.prettierrc.js` - 代码格式化配置

## 🎯 快速开始

### 方法一：一键启动完整环境
```bash
# 在VS Code中按 Cmd+Shift+P，选择 "Tasks: Run Task"
# 然后选择 "🚀 启动完整开发环境"
```

### 方法二：分步启动
1. **启动微信开发者工具**
   ```bash
   # VS Code任务或手动执行
   open -a "微信开发者工具" .
   ```

2. **启动本地预览服务器**
   ```bash
   python3 server.py 8082
   ```

3. **启动文件同步监听**
   ```bash
   node sync-dev.js watch
   ```

## 🔄 开发工作流

### 标准开发循环

1. **📝 编写代码**
   - 在VS Code中编辑 `.wxml`、`.wxss`、`.js` 文件
   - 自动保存时触发格式化和ESLint检查
   - 代码补全和语法高亮支持

2. **🔄 自动同步**
   - 文件保存后自动同步到HTML预览文件
   - 支持页面和组件的实时转换
   - 全局样式自动更新

3. **👀 双端预览**
   - **微信开发者工具**: 真实小程序环境预览
   - **浏览器预览**: http://localhost:8082

4. **🐛 调试测试**
   - VS Code调试器支持
   - 微信开发者工具调试面板
   - 浏览器开发者工具

### 具体操作步骤

#### 新功能开发
1. 在 `pages/` 或 `components/` 目录创建新文件
2. 编写 WXML、WXSS、JS 代码
3. 保存文件触发自动同步
4. 在微信开发者工具中查看效果
5. 在浏览器中测试响应式布局

#### 现有功能修改
1. 打开对应的页面或组件文件
2. 修改代码并保存
3. 自动同步更新预览文件
4. 实时查看修改效果

#### 样式调试
1. 修改 `.wxss` 文件
2. 自动转换为 CSS 并更新预览
3. 在浏览器中使用开发者工具调试
4. 回到微信开发者工具验证效果

## 🎨 代码规范

### 自动格式化
- **保存时自动格式化**: 所有文件类型
- **粘贴时格式化**: JavaScript文件
- **ESLint自动修复**: 保存时执行

### 代码风格
- **缩进**: 2个空格
- **引号**: 单引号
- **分号**: 不使用分号（除必要情况）
- **尾随逗号**: 不使用

### 文件类型配置
- **JavaScript**: Prettier + ESLint
- **WXML**: HTML格式化
- **WXSS**: CSS格式化
- **JSON**: Prettier格式化

## 🔧 可用任务

### VS Code任务列表
- `🚀 启动完整开发环境` - 一键启动所有服务
- `启动微信开发者工具` - 打开微信开发者工具
- `启动本地预览服务器` - 启动HTTP服务器
- `启动文件同步监听` - 监听文件变化并同步
- `🔄 同步所有页面` - 手动同步所有页面
- `构建项目` - 构建生产版本
- `代码检查` - 运行ESLint检查
- `修复代码格式` - 自动修复代码问题
- `清理缓存` - 清理node_modules并重新安装

### 命令行脚本
```bash
# 同步所有页面
npm run sync

# 同步特定页面
npm run sync:home
npm run sync:profile
npm run sync:messages
npm run sync:frequency

# 启动文件监听
npm run watch

# 启动预览服务器
npm run preview

# 代码检查和修复
npm run lint
npm run lint:fix
```

## 🐛 调试配置

### VS Code调试选项
- `🔍 调试小程序页面同步` - 调试同步脚本
- `👀 监听文件变化调试` - 调试文件监听
- `微信小程序调试` - 调试小程序主文件
- `当前文件调试` - 调试当前打开的文件

### 调试技巧
1. **断点调试**: 在VS Code中设置断点
2. **控制台输出**: 查看同步过程日志
3. **网络面板**: 在浏览器中检查资源加载
4. **微信调试**: 使用微信开发者工具的调试面板

## 📱 预览地址

- **本地预览**: http://localhost:8082
- **微信开发者工具**: 项目根目录导入
- **移动端预览**: 支持移动设备访问本地地址

## ⚠️ 注意事项

### 文件同步
- 确保文件监听服务正在运行
- 大文件修改可能需要手动同步
- 组件依赖关系变更需要重新同步

### 端口冲突
- 默认端口8082，如被占用会自动提示
- 可以手动指定其他端口：`python3 server.py 8083`

### 微信开发者工具
- 确保项目已正确导入到微信开发者工具
- AppID配置：`wxba8b023c84f372f5`
- 开启热重载和ES6转换功能

## 🔗 相关文档

- [VS Code工作流详细说明](./VS_CODE_WORKFLOW.md)
- [开发同步工作流程](./DEVELOPMENT_WORKFLOW.md)
- [插件安装指南](./INSTALL_EXTENSIONS.md)

## 🆘 常见问题

### Q: 同步失败怎么办？
A: 检查文件路径是否正确，确保同步脚本正在运行

### Q: 预览页面空白？
A: 检查服务器是否启动，确认端口没有被占用

### Q: 代码格式化不生效？
A: 检查Prettier插件是否启用，确认文件类型配置正确

### Q: 微信开发者工具无法打开？
A: 确认微信开发者工具已安装，检查应用程序名称是否正确

---

🎉 **开发愉快！** 如有问题，请查看相关文档或联系开发团队。