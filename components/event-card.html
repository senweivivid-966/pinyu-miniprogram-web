<div class="event-card custom-component div" data-component="div"><div class="card-content custom-component div" data-component="div"><div class="image-container custom-component div" data-component="div"><div class="custom-component block" wx:if="<span data-expression="coverUrl && !imgError" data-component="block">coverUrl && !imgError</div>"><div class="custom-component div" wx:if="<span data-expression="imgLoading" data-component="div">imgLoading</div>" class="image-placeholder loading"><div class="loading-animation custom-component div" data-component="div"></div></div><div class="cover-image <span data-expression= custom-component img"imgLoading ? 'loading' : ''" data-component="img">imgLoading ? 'loading' : ''</div>" src="<div class="custom-component span" data-expression="coverUrl" data-component="span">coverUrl</div>" style="object-fit: cover" onload="onImageLoad" onerror="onImageError" data-loading="<div class="custom-component span" data-expression="true" data-component="span">true</div>" /></div><div data-wx-else style="display: none;" class="image-placeholder custom-component div" data-component="div"><div class="custom-component span" wx:if="<span data-expression="coverUrl" data-component="span">coverUrl</div>" class="error-text">加载失败</div><div class="custom-component button" wx:if="<span data-expression="coverUrl" data-component="button">coverUrl</div>" class="retry-btn" onclick="retryImage">重试</div></div></div><div class="content-area custom-component div" data-component="div"><div class="title custom-component div" data-component="div"><div class="custom-component div" nodes="<span data-expression="highlightText(title, highlightQuery)" data-component="div">highlightText(title, highlightQuery)</div>"></div></div><div class="meta custom-component div" data-component="div"><div class="custom-component div" nodes="<span data-expression="highlightText(meta, highlightQuery)" data-component="div">highlightText(meta, highlightQuery)</div>"></div></div><div class="custom-component div" wx:if="<span data-expression="locationText" data-component="div">locationText</div>" class="location"><div class="custom-component div" nodes="<span data-expression="highlightText(locationText, highlightQuery)" data-component="div">highlightText(locationText, highlightQuery)</div>"></div></div><div class="status-tags custom-component div" data-component="div"><div class="custom-component div" wx:if="<span data-expression="registeredByMe" data-component="div">registeredByMe</div>" class="tag registered">已报名</div><div class="custom-component div" wx:if="<span data-expression="waitlistedByMe" data-component="div">waitlistedByMe</div>" class="tag waitlisted">候补中</div><div class="custom-component div" data-wx-if="waitlistPosition data-component="div">= 0" style="display: none;" data-bind-if="waitlistPosition >= 0" class="tag position"> 我的候补位置：第 <div class="custom-component span" data-expression="waitlistPosition + 1" data-component="span">waitlistPosition + 1</div> 位 </div></div><div class="action-buttons custom-component div" data-component="div"><div class="btn primary {{registeredByMe || remaining <= 0 ? 'disabled' : ''}} custom-component button" disabled="{{registeredByMe || remaining <= 0}}" data-bind-disabled="registeredByMe || remaining <= 0" onclick="onRegisterTap" data-component="button"><div class="custom-component span" data-expression="registeredByMe ? '已报名' : (remaining data-component="span"> 0 ? '报名' : '名额已满')">registeredByMe ? '已报名' : (remaining > 0 ? '报名' : '名额已满')</div></div><div class="btn secondary custom-component button" onclick="onDetailTap" data-component="button">详情</div><div class="custom-component button" wx:if="<span data-expression="registeredByMe" data-component="button">registeredByMe</div>" class="btn secondary" disabled="<div class="custom-component span" data-expression="loading.cancelReg" data-component="span">loading.cancelReg</div>" onclick="onCancelRegister" ><div class="custom-component span" data-expression="loading.cancelReg ? '取消中…' : '取消报名'" data-component="span">loading.cancelReg ? '取消中…' : '取消报名'</div></div><div class="custom-component button" wx:if="<span data-expression="waitlistedByMe" data-component="button">waitlistedByMe</div>" class="btn secondary" disabled="<div class="custom-component span" data-expression="loading.cancelWait" data-component="span">loading.cancelWait</div>" onclick="onCancelWaitlist" ><div class="custom-component span" data-expression="loading.cancelWait ? '取消中…' : '取消候补'" data-component="span">loading.cancelWait ? '取消中…' : '取消候补'</div></div><div data-wx-if="remaining <= 0 && !registeredByMe && !waitlistedByMe" style="display: none;" data-bind-if="remaining <= 0 && !registeredByMe && !waitlistedByMe" class="btn secondary custom-component button" disabled="<span data-expression="loading.joinWait" data-component="button">loading.joinWait</div>" onclick="onJoinWaitlist" ><div class="custom-component span" data-expression="loading.joinWait ? '加入中…' : '加入候补'" data-component="span">loading.joinWait ? '加入中…' : '加入候补'</div></div></div></div></div><div class="custom-component div" wx:if="<span data-expression="showModal" data-component="div">showModal</div>" class="modal-overlay" onclick="onCloseModal"><div class="modal-content custom-component div" catchtap="" data-component="div"><div class="modal-header custom-component div" data-component="div"><div class="modal-title custom-component span" data-component="span">报名信息</div><div class="close-btn custom-component button" onclick="onCloseModal" data-component="button">×</div></div><div class="modal-body custom-component div" data-component="div"><div class="form-item custom-component div" data-component="div"><div class="label custom-component span" data-component="span">姓名</div><div class="input custom-component input" placeholder="请输入姓名" value="<span data-expression="formData.name" data-component="input">formData.name</div>" data-field="name" oninput="onFormInput" /></div><div class="form-item custom-component div" data-component="div"><div class="label custom-component span" data-component="span">手机号</div><div class="input custom-component input" placeholder="请输入手机号" type="number" value="<span data-expression="formData.phone" data-component="input">formData.phone</div>" data-field="phone" oninput="onFormInput" /></div><div class="form-item custom-component div" data-component="div"><div class="label custom-component span" data-component="span">备注</div><div class="textarea custom-component textarea" placeholder="请输入备注（可选）" value="<span data-expression="formData.remark" data-component="textarea">formData.remark</div>" data-field="remark" oninput="onFormInput" /></div></div><div class="modal-footer custom-component div" data-component="div"><div class="btn primary custom-component button" disabled="<span data-expression="loading.register" data-component="button">loading.register</div>" onclick="onSubmitRegister" ><div class="custom-component span" data-expression="loading.register ? '提交中…' : '提交报名'" data-component="span">loading.register ? '提交中…' : '提交报名'</div></div><div class="btn secondary custom-component button" onclick="onCloseModal" data-component="button">取消</div></div></div></div></div>