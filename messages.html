<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>messages - å“é‡å°ç¨‹åºé¢„è§ˆ</title>
    <link rel="stylesheet" href="app.css">
    <link rel="stylesheet" href="messages.css">
    <style>
        /* ç§»åŠ¨ç«¯é€‚é… */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 75%, #f5576c 100%);
        }
        
        /* å®¹å™¨æ ·å¼ */
        .page-container {
            max-width: 375px;
            margin: 0 auto;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 75%, #f5576c 100%);
            min-height: 100vh;
            position: relative;
        }
        
        /* è°ƒè¯•ä¿¡æ¯ */
        .debug-info {
            position: fixed;
            top: 70px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 9999;
        }
    </style>
<style>
  /* æ¥å…¥ç»Ÿä¸€é€šæ åéšè—æ—§é¡¶éƒ¨æ  */
  .top-nav { display: none !important; }
</style>
</head>
<body>
    <div class="debug-info">
        ğŸ“± messages é¡µé¢é¢„è§ˆ | ğŸ”„ åŒæ­¥æ—¶é—´: 2025/10/18 21:36:02
    </div>
    
    <div class="page-container">
        <!-- ç»Ÿä¸€é¡¶éƒ¨å¯¼èˆªæ  -->
        <div id="unified-navbar-container"></div>
        <div class="messages-page custom-component div" data-component="div"><div class="top-nav custom-component div" data-component="div"><div class="nav-content custom-component div" data-component="div"><div class="nav-title custom-component div" data-component="div">ç§ä¿¡</div><div class="nav-actions custom-component div" data-component="div"><div class="search-btn custom-component div" onclick="toggleSearch" data-component="div"><div class="search-icon custom-component span" data-component="span">ğŸ”</div></div></div></div><div class="search-bar <span data-expression= custom-component div"showSearch ? 'show' : ''" data-component="div">showSearch ? 'show' : ''</div>"><div class="search-input custom-component input" placeholder="æœç´¢è”ç³»äººæˆ–æ¶ˆæ¯" value="<span data-expression="searchQuery" data-component="input">searchQuery</div>" oninput="onSearchInput" autofocus="<div class="custom-component span" data-expression="showSearch" data-component="span">showSearch</div>" /></div></div><div class="conversation-list custom-component div" data-scroll-y="true" refresher-enabled="true" bindrefresherrefresh="onPullDownRefresh" data-component="div"><div class="conversations custom-component div" data-component="div"><div class="custom-component div" wx:for="<span data-expression="conversations" data-component="div">conversations</div>" data-wx-key="id" class="conversation-item" data-id="<div class="custom-component span" data-expression="item.id" data-component="span">item.id</div>" data-user-id="<div class="custom-component span" data-expression="item.userId" data-component="span">item.userId</div>" data-user-name="<div class="custom-component span" data-expression="item.userName" data-component="span">item.userName</div>" onclick="onConversationTap" oncontextmenu="onDeleteConversation" ><div class="user-avatar-container custom-component div" data-component="div"><div class="user-avatar custom-component img" src="<span data-expression="item.userAvatar" data-component="img">item.userAvatar</div>" style="object-fit: cover" /><div class="custom-component div" wx:if="<span data-expression="item.isOnline" data-component="div">item.isOnline</div>" class="online-indicator"></div><div class="custom-component div" wx:if="<span data-expression="item.unreadCount data-component="div"> 0">item.unreadCount > 0</div>" class="unread-badge"><div class="custom-component span" data-expression="item.unreadCount data-component="span"> 99 ? '99+' : item.unreadCount">item.unreadCount > 99 ? '99+' : item.unreadCount</div></div></div><div class="conversation-info custom-component div" data-component="div"><div class="conversation-header custom-component div" data-component="div"><div class="user-name custom-component span" data-component="span"><div class="custom-component span" data-expression="item.userName" data-component="span">item.userName</div></div><div class="message-time custom-component span" data-component="span"><div class="custom-component span" data-expression="item.lastMessageTime" data-component="span">item.lastMessageTime</div></div></div><div class="last-message custom-component div" data-component="div"><div class="message-content <span data-expression= custom-component span"item.unreadCount data-component="span"> 0 ? 'unread' : ''">item.unreadCount > 0 ? 'unread' : ''</div>"> {{item.messageType === 'image' ? '[å›¾ç‰‡]' : item.lastMessage}} </div></div></div><div class="conversation-arrow custom-component div" data-component="div"><div class="arrow-icon custom-component span" data-component="span">â€º</div></div></div></div><div class="loading-container custom-component div" wx:if="<span data-expression="loading" data-component="div">loading</div>"><div class="loading-spinner custom-component div" data-component="div"></div><div class="loading-text custom-component span" data-component="span">åŠ è½½ä¸­...</div></div><div class="empty-state custom-component div" data-wx-if="conversations.length === 0 && !loading" style="display: none;" data-bind-if="conversations.length === 0 && !loading" data-component="div"><div class="empty-icon custom-component img" src="/assets/images/empty-messages.svg" / data-component="img"><div class="empty-title custom-component span" data-component="span">æš‚æ— æ¶ˆæ¯</div><div class="empty-subtitle custom-component span" data-component="span">å¼€å§‹ä¸å…¶ä»–ä¼šå‘˜èŠå¤©å§</div><div class="empty-btn custom-component button" onclick="goToMeet" data-component="button">å»ç›¸é‡</div></div></div><div class="custom-component bottom-navbar" current-tab="message" bind:navchange="onNavChange" / data-component="bottom-navbar"></div>
    </div>

    <script>
        // APIæ¡¥æ¥å±‚
        const wx = {
            navigateTo: (options) => {
                console.log('wx.navigateTo:', options);
                alert('å¯¼èˆªåˆ°: ' + options.url);
            },
            showToast: (options) => {
                console.log('wx.showToast:', options);
                alert(options.title);
            },
            request: (options) => {
                console.log('wx.request:', options);
                // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
                setTimeout(() => {
                    if (options.success) {
                        options.success({ data: { message: 'æ¨¡æ‹Ÿæ•°æ®' } });
                    }
                }, 1000);
            }
        };
        
        // é¡µé¢æ•°æ®æ¨¡æ‹Ÿ
        const pageData = {
            messages: {
                // è¿™é‡Œå¯ä»¥æ·»åŠ é¡µé¢ç‰¹å®šçš„æ¨¡æ‹Ÿæ•°æ®
            }
        };
        
        console.log('ğŸš€ é¡µé¢åŠ è½½å®Œæˆ:', 'messages');
        console.log('ğŸ“Š é¡µé¢æ•°æ®:', pageData);
    </script>
<script>
  // ç»Ÿä¸€å¯¼èˆªæ å·²é€šè¿‡navbar-loader.jsè‡ªåŠ¨åŠ è½½
</script>

<!-- åŠ è½½ç»Ÿä¸€å¯¼èˆªæ  -->
<script src="components/navbar-loader.js"></script>
</body>
</html>