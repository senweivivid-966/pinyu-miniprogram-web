<!--pages/frequency-match/index.wxml-->
<view class="frequency-match-page">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="top-nav">
    <view class="nav-title">ç›¸é‡</view>
    <view class="nav-subtitle">å‘ç°æœ‰è¶£çš„äºº</view>
  </view>

  <!-- ä¼šå‘˜å¡ç‰‡åˆ—è¡¨ -->
  <scroll-view 
    class="member-list" 
    scroll-y="true"
    bindscrolltolower="onReachBottom"
    refresher-enabled="true"
    bindrefresherrefresh="onPullDownRefresh"
  >
    <view class="member-cards">
      <view 
        wx:for="{{members}}" 
        wx:key="id" 
        class="member-card"
        bindtap="onMemberTap"
        data-id="{{item.id}}"
      >
        <!-- ä¼šå‘˜å¤´åƒå’ŒåŸºæœ¬ä¿¡æ¯ -->
        <view class="member-header">
          <image class="member-avatar" src="{{item.avatarUrl}}" mode="aspectFill" />
          <view class="online-indicator" wx:if="{{item.isOnline}}"></view>
        </view>

        <view class="member-info">
          <view class="member-name-age">
            <text class="member-name">{{item.name}}</text>
            <text class="member-age">{{item.age}}å²</text>
          </view>
          
          <view class="member-location">
            <text class="location-icon">ğŸ“</text>
            <text class="location-text">{{item.location}} Â· {{item.distance}}km</text>
          </view>

          <view class="member-bio">{{item.bio}}</view>

          <!-- å…´è¶£æ ‡ç­¾ -->
          <view class="interests">
            <text 
              wx:for="{{item.interests}}" 
              wx:key="*this" 
              class="interest-tag"
            >
              {{item}}
            </text>
          </view>

          <!-- åŒ¹é…åº¦ -->
          <view class="match-score">
            <text class="score-label">åŒ¹é…åº¦</text>
            <view class="score-bar">
              <view class="score-fill" style="width: {{item.matchScore}}%"></view>
            </view>
            <text class="score-text">{{item.matchScore}}%</text>
          </view>
        </view>

        <!-- æ“ä½œæŒ‰é’® -->
        <view class="member-actions">
          <view 
            class="action-btn skip-btn"
            catchtap="onSkip"
            data-id="{{item.id}}"
          >
            <text class="action-icon">âœ•</text>
          </view>
          
          <view 
            class="action-btn like-btn {{item.isLiked ? 'liked' : ''}}"
            catchtap="onLike"
            data-id="{{item.id}}"
          >
            <text class="action-icon">{{item.isLiked ? 'ğŸ’–' : 'ğŸ’—'}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-container" wx:if="{{loading}}">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- æ²¡æœ‰æ›´å¤šæ•°æ® -->
    <view class="no-more" wx:if="{{!hasMore && members.length > 0}}">
      <text>æ²¡æœ‰æ›´å¤šä¼šå‘˜äº†</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{members.length === 0 && !loading}}">
      <image class="empty-icon" src="/assets/images/empty-match.svg" />
      <text class="empty-title">æš‚æ— æ¨è</text>
      <text class="empty-subtitle">å®Œå–„ä½ çš„èµ„æ–™ï¼Œè·å¾—æ›´å¤šåŒ¹é…æœºä¼š</text>
      <button class="empty-btn" bindtap="goToProfile">å®Œå–„èµ„æ–™</button>
    </view>
  </scroll-view>

  <!-- åº•éƒ¨å¯¼èˆª -->
  <bottom-navbar current-tab="meet" bind:navchange="onNavChange" />
</view>