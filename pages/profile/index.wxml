<!--pages/profile/index.wxml-->
<view class="profile-page">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="top-nav">
    <view class="nav-content">
      <view class="nav-title">ä¸ªäººä¸­å¿ƒ</view>
      <view class="nav-actions">
        <view class="settings-btn" bindtap="onMenuItemTap" data-id="notifications">
          <text class="settings-icon">âš™ï¸</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-header">
      <view class="avatar-container" bindtap="onAvatarTap">
        <image class="user-avatar" src="{{userInfo.avatar}}" mode="aspectFill" />
        <view class="avatar-edit-icon">ğŸ“·</view>
        <view wx:if="{{userInfo.verified}}" class="verified-badge">âœ“</view>
      </view>
      
      <view class="user-info">
        <view class="user-name-row">
          <text class="user-name">{{userInfo.name}}</text>
          <view wx:if="{{userInfo.vipLevel === 'premium'}}" class="vip-badge">VIP</view>
        </view>
        <view class="user-meta">
          <text class="user-age">{{userInfo.age}}å²</text>
          <text class="separator">Â·</text>
          <text class="user-location">{{userInfo.city}}</text>
        </view>
        <view class="user-occupation">{{userInfo.occupation}} @ {{userInfo.company}}</view>
      </view>
    </view>

    <view class="user-bio">{{userInfo.bio}}</view>

    <!-- å®Œå–„åº¦è¿›åº¦æ¡ -->
    <view class="completion-section">
      <view class="completion-header">
        <text class="completion-label">èµ„æ–™å®Œå–„åº¦</text>
        <text class="completion-percent">{{userInfo.profileCompletion}}%</text>
      </view>
      <view class="completion-bar">
        <view class="completion-progress" style="width: {{userInfo.profileCompletion}}%"></view>
      </view>
    </view>

    <!-- ç»Ÿè®¡æ•°æ® -->
    <view class="stats-section">
      <view class="stat-item">
        <text class="stat-number">{{stats.events}}</text>
        <text class="stat-label">å‚ä¸æ´»åŠ¨</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats.matches}}</text>
        <text class="stat-label">æˆåŠŸåŒ¹é…</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats.likes}}</text>
        <text class="stat-label">æ”¶åˆ°å–œæ¬¢</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats.views}}</text>
        <text class="stat-label">èµ„æ–™æµè§ˆ</text>
      </view>
    </view>
  </view>

  <!-- èœå•åˆ—è¡¨ -->
  <view class="menu-section">
    <view 
      wx:for="{{menuItems}}" 
      wx:key="id" 
      class="menu-item" 
      bindtap="onMenuItemTap" 
      data-id="{{item.id}}"
    >
      <view class="menu-icon">{{item.icon}}</view>
      <view class="menu-content">
        <view class="menu-title">{{item.title}}</view>
        <view class="menu-subtitle">{{item.subtitle}}</view>
      </view>
      <view class="menu-right">
        <view wx:if="{{item.badge}}" class="menu-badge">{{item.badge}}</view>
        <view wx:if="{{item.arrow}}" class="menu-arrow">
          <text class="arrow-icon">â€º</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- åº•éƒ¨å¯¼èˆª -->
  <bottom-navbar current-tab="{{currentTab}}" bind:change="onNavChange" />
</view>