<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ªäººä¸­å¿ƒ - é¢‘é‡å°ç¨‹åºé¢„è§ˆ</title>
    <link rel="stylesheet" href="app.css">
    <link rel="stylesheet" href="profile.css">
    <script src="js/auth.js"></script>
    <style>
        /* ç§»åŠ¨ç«¯é€‚é… */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 75%, #f5576c 100%);
        }
        
        /* å®¹å™¨æ ·å¼ */
        .page-container {
            max-width: 375px;
            margin: 0 auto;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 75%, #f5576c 100%);
            min-height: 100vh;
            position: relative;
        }
        
        /* è°ƒè¯•ä¿¡æ¯ */
        .debug-info {
            position: fixed;
            top: 70px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 9999;
        }
    </style>
</head>
<body>
    <div class="page-container">
        <!-- ç»Ÿä¸€é¡¶éƒ¨å¯¼èˆªæ  -->
        <div id="unified-navbar-container"></div>

        <!-- ç”¨æˆ·å¡ç‰‡ -->
        <div class="user-card">
            <!-- å¤´åƒåŒºåŸŸ -->
            <div class="avatar-section">
                <div class="avatar-container" onclick="uploadAvatar()">
                    <img id="userAvatar" class="user-avatar" src="https://via.placeholder.com/100x100/007AFF/FFFFFF?text=å¤´åƒ" alt="ç”¨æˆ·å¤´åƒ">
                    <div class="avatar-edit-overlay">
                        <span class="camera-icon">ğŸ“·</span>
                        <span class="edit-text">æ›´æ¢å¤´åƒ</span>
                    </div>
                    <input type="file" id="avatarInput" accept="image/*" style="display: none;" onchange="handleAvatarChange(event)">
                </div>
                <div class="user-basic-info">
                    <div class="user-name-row">
                        <span id="userName" class="user-name">ç”¨æˆ·æ˜µç§°</span>
                        <span class="vip-badge" id="vipBadge" style="display: none;">VIP</span>
                    </div>
                    <div class="user-meta">
                        <span id="userAge" class="user-age">25å²</span>
                        <span class="separator">Â·</span>
                        <span id="userLocation" class="user-location">åŒ—äº¬</span>
                    </div>
                    <div id="userOccupation" class="user-occupation">äº§å“ç»ç† @ ç§‘æŠ€å…¬å¸</div>
                </div>
            </div>

            <!-- ä¸ªäººç®€ä»‹ -->
            <div class="user-bio-section">
                <div class="bio-label">ä¸ªäººç®€ä»‹</div>
                <div id="userBio" class="user-bio" onclick="editBio()">ç‚¹å‡»æ·»åŠ ä¸ªäººç®€ä»‹ï¼Œè®©å¤§å®¶æ›´äº†è§£ä½ ...</div>
            </div>

            <!-- èµ„æ–™å®Œå–„åº¦ -->
            <div class="completion-section">
                <div class="completion-header">
                    <span class="completion-label">èµ„æ–™å®Œå–„åº¦</span>
                    <span id="completionPercent" class="completion-percent">75%</span>
                </div>
                <div class="completion-bar">
                    <div id="completionProgress" class="completion-progress" style="width: 75%"></div>
                </div>
                <div class="completion-tips">å®Œå–„èµ„æ–™å¯æé«˜åŒ¹é…æˆåŠŸç‡</div>
            </div>

            <!-- ç»Ÿè®¡æ•°æ® -->
            <div class="stats-section">
                <div class="stat-item">
                    <span id="statEvents" class="stat-number">12</span>
                    <span class="stat-label">å‚ä¸æ´»åŠ¨</span>
                </div>
                <div class="stat-item">
                    <span id="statMatches" class="stat-number">8</span>
                    <span class="stat-label">æˆåŠŸåŒ¹é…</span>
                </div>
                <div class="stat-item">
                    <span id="statLikes" class="stat-number">25</span>
                    <span class="stat-label">æ”¶åˆ°å–œæ¬¢</span>
                </div>
                <div class="stat-item">
                    <span id="statViews" class="stat-number">156</span>
                    <span class="stat-label">èµ„æ–™æµè§ˆ</span>
                </div>
            </div>
        </div>

        <!-- èœå•åŒºåŸŸ -->
        <div class="menu-section">
            <!-- ä¸ªäººä¿¡æ¯ç®¡ç† -->
            <div class="menu-group">
                <div class="menu-group-title">ä¸ªäººä¿¡æ¯</div>
                <div class="menu-item" onclick="editProfile()">
                    <div class="menu-icon">ğŸ‘¤</div>
                    <div class="menu-content">
                        <div class="menu-title">ç¼–è¾‘èµ„æ–™</div>
                        <div class="menu-subtitle">ä¿®æ”¹æ˜µç§°ã€æ€§åˆ«ã€ç”Ÿæ—¥ç­‰</div>
                    </div>
                    <div class="menu-arrow">â€º</div>
                </div>
                <div class="menu-item" onclick="editPhotos()">
                    <div class="menu-icon">ğŸ“¸</div>
                    <div class="menu-content">
                        <div class="menu-title">æˆ‘çš„ç…§ç‰‡</div>
                        <div class="menu-subtitle">ç®¡ç†ä¸ªäººç…§ç‰‡</div>
                    </div>
                    <div class="menu-arrow">â€º</div>
                </div>
                <div class="menu-item" onclick="editInterests()">
                    <div class="menu-icon">â¤ï¸</div>
                    <div class="menu-content">
                        <div class="menu-title">å…´è¶£çˆ±å¥½</div>
                        <div class="menu-subtitle">è®¾ç½®ä½ çš„å…´è¶£æ ‡ç­¾</div>
                    </div>
                    <div class="menu-arrow">â€º</div>
                </div>
            </div>

            <!-- è´¦å·è®¾ç½® -->
            <div class="menu-group">
                <div class="menu-group-title">è´¦å·è®¾ç½®</div>
                <div class="menu-item" onclick="changePassword()">
                    <div class="menu-icon">ğŸ”’</div>
                    <div class="menu-content">
                        <div class="menu-title">ä¿®æ”¹å¯†ç </div>
                        <div class="menu-subtitle">æ›´æ”¹ç™»å½•å¯†ç </div>
                    </div>
                    <div class="menu-arrow">â€º</div>
                </div>
                <div class="menu-item" onclick="bindEmail()">
                    <div class="menu-icon">ğŸ“§</div>
                    <div class="menu-content">
                        <div class="menu-title">ç»‘å®šé‚®ç®±</div>
                        <div class="menu-subtitle">ç”¨äºæ‰¾å›å¯†ç </div>
                    </div>
                    <div class="menu-arrow">â€º</div>
                </div>
                <div class="menu-item" onclick="privacySettings()">
                    <div class="menu-icon">ğŸ›¡ï¸</div>
                    <div class="menu-content">
                        <div class="menu-title">éšç§è®¾ç½®</div>
                        <div class="menu-subtitle">ç®¡ç†ä¸ªäººéšç§</div>
                    </div>
                    <div class="menu-arrow">â€º</div>
                </div>
            </div>

            <!-- å…¶ä»–åŠŸèƒ½ -->
            <div class="menu-group">
                <div class="menu-group-title">å…¶ä»–</div>
                <div class="menu-item" onclick="notifications()">
                    <div class="menu-icon">ğŸ””</div>
                    <div class="menu-content">
                        <div class="menu-title">æ¶ˆæ¯é€šçŸ¥</div>
                        <div class="menu-subtitle">ç®¡ç†é€šçŸ¥è®¾ç½®</div>
                    </div>
                    <div class="menu-badge">3</div>
                    <div class="menu-arrow">â€º</div>
                </div>
                <div class="menu-item" onclick="feedback()">
                    <div class="menu-icon">ğŸ’¬</div>
                    <div class="menu-content">
                        <div class="menu-title">æ„è§åé¦ˆ</div>
                        <div class="menu-subtitle">å¸®åŠ©æˆ‘ä»¬æ”¹è¿›</div>
                    </div>
                    <div class="menu-arrow">â€º</div>
                </div>
                <div class="menu-item" onclick="about()">
                    <div class="menu-icon">â„¹ï¸</div>
                    <div class="menu-content">
                        <div class="menu-title">å…³äºé¢‘é‡</div>
                        <div class="menu-subtitle">ç‰ˆæœ¬ 1.0.0</div>
                    </div>
                    <div class="menu-arrow">â€º</div>
                </div>
            </div>

            <!-- é€€å‡ºç™»å½• -->
            <div class="logout-section">
                <button class="logout-btn" onclick="logout()">é€€å‡ºç™»å½•</button>
            </div>
        </div>

        <!-- ç¼–è¾‘å¼¹çª— -->
        <div id="editModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <span class="modal-title">ç¼–è¾‘ä¿¡æ¯</span>
                    <button class="modal-close" onclick="closeModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="editForm">
                        <div class="form-group">
                            <label class="form-label">æ˜µç§°</label>
                            <input type="text" id="editNickname" class="form-input" maxlength="20">
                        </div>
                        <div class="form-group">
                            <label class="form-label">æ€§åˆ«</label>
                            <div class="gender-options">
                                <label class="gender-option">
                                    <input type="radio" name="editGender" value="male">
                                    <span class="gender-text">ç”·</span>
                                </label>
                                <label class="gender-option">
                                    <input type="radio" name="editGender" value="female">
                                    <span class="gender-text">å¥³</span>
                                </label>
                                <label class="gender-option">
                                    <input type="radio" name="editGender" value="other">
                                    <span class="gender-text">å…¶ä»–</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ç”Ÿæ—¥</label>
                            <input type="date" id="editBirthday" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">æ‰€åœ¨åŸå¸‚</label>
                            <input type="text" id="editCity" class="form-input" maxlength="50">
                        </div>
                        <div class="form-group">
                            <label class="form-label">èŒä¸š</label>
                            <input type="text" id="editOccupation" class="form-input" maxlength="50">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å…¬å¸</label>
                            <input type="text" id="editCompany" class="form-input" maxlength="50">
                        </div>
                        <div class="form-group">
                            <label class="form-label">ä¸ªäººç®€ä»‹</label>
                            <textarea id="editBioText" class="form-textarea" maxlength="200" placeholder="ä»‹ç»ä¸€ä¸‹è‡ªå·±å§..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-cancel" onclick="closeModal()">å–æ¶ˆ</button>
                    <button type="button" class="btn-save" onclick="saveProfile()">ä¿å­˜</button>
                </div>
            </div>
        </div>

        <!-- åŠ è½½çŠ¶æ€ -->
        <div id="loadingOverlay" class="loading-overlay" style="display: none;">
            <div class="loading-spinner"></div>
            <div class="loading-text">ä¿å­˜ä¸­...</div>
        </div>
    </div>

    <script>
        // ç”¨æˆ·æ•°æ®ç®¡ç†
        let userProfile = {
            avatar: 'https://via.placeholder.com/100x100/007AFF/FFFFFF?text=å¤´åƒ',
            nickname: 'ç”¨æˆ·æ˜µç§°',
            gender: 'male',
            age: 25,
            birthday: '1999-01-01',
            city: 'åŒ—äº¬',
            occupation: 'äº§å“ç»ç†',
            company: 'ç§‘æŠ€å…¬å¸',
            bio: 'ç‚¹å‡»æ·»åŠ ä¸ªäººç®€ä»‹ï¼Œè®©å¤§å®¶æ›´äº†è§£ä½ ...',
            profileCompletion: 75,
            stats: {
                events: 12,
                matches: 8,
                likes: 25,
                views: 156
            }
        };

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥ç™»å½•çŠ¶æ€
            if (!AuthManager.isLoggedIn()) {
                window.location.href = 'login.html';
                return;
            }

            // åŠ è½½ç”¨æˆ·æ•°æ®
            loadUserProfile();
        });

        // åŠ è½½ç”¨æˆ·èµ„æ–™
        function loadUserProfile() {
            const user = AuthManager.getCurrentUser();
            if (user) {
                // æ›´æ–°ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
                document.getElementById('userName').textContent = user.nickname || userProfile.nickname;
                document.getElementById('userAge').textContent = calculateAge(user.birthday || userProfile.birthday) + 'å²';
                document.getElementById('userLocation').textContent = user.city || userProfile.city;
                document.getElementById('userOccupation').textContent = 
                    (user.occupation || userProfile.occupation) + ' @ ' + (user.company || userProfile.company);
                
                // æ›´æ–°ä¸ªäººç®€ä»‹
                const bioElement = document.getElementById('userBio');
                if (user.bio && user.bio.trim()) {
                    bioElement.textContent = user.bio;
                    bioElement.classList.remove('placeholder');
                } else {
                    bioElement.textContent = 'ç‚¹å‡»æ·»åŠ ä¸ªäººç®€ä»‹ï¼Œè®©å¤§å®¶æ›´äº†è§£ä½ ...';
                    bioElement.classList.add('placeholder');
                }

                // æ›´æ–°å¤´åƒ
                if (user.avatar) {
                    document.getElementById('userAvatar').src = user.avatar;
                }

                // è®¡ç®—å¹¶æ›´æ–°èµ„æ–™å®Œå–„åº¦
                updateProfileCompletion(user);
            }
        }

        // è®¡ç®—å¹´é¾„
        function calculateAge(birthday) {
            const today = new Date();
            const birthDate = new Date(birthday);
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            
            return age;
        }

        // æ›´æ–°èµ„æ–™å®Œå–„åº¦
        function updateProfileCompletion(user) {
            let completedFields = 0;
            const totalFields = 8;

            if (user.nickname) completedFields++;
            if (user.gender) completedFields++;
            if (user.birthday) completedFields++;
            if (user.city) completedFields++;
            if (user.occupation) completedFields++;
            if (user.company) completedFields++;
            if (user.bio && user.bio.trim()) completedFields++;
            if (user.avatar && user.avatar !== userProfile.avatar) completedFields++;

            const percentage = Math.round((completedFields / totalFields) * 100);
            document.getElementById('completionPercent').textContent = percentage + '%';
            document.getElementById('completionProgress').style.width = percentage + '%';
        }

        // å¤´åƒä¸Šä¼ 
        function uploadAvatar() {
            document.getElementById('avatarInput').click();
        }

        function handleAvatarChange(event) {
            const file = event.target.files[0];
            if (file) {
                if (file.size > 5 * 1024 * 1024) {
                    showToast('å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡5MB', 'error');
                    return;
                }

                const reader = new FileReader();
                reader.onload = function(e) {
                    const avatarUrl = e.target.result;
                    document.getElementById('userAvatar').src = avatarUrl;
                    
                    // ä¿å­˜åˆ°ç”¨æˆ·æ•°æ®
                    const user = AuthManager.getCurrentUser();
                    user.avatar = avatarUrl;
                    AuthManager.updateUser(user);
                    
                    showToast('å¤´åƒæ›´æ–°æˆåŠŸ', 'success');
                    updateProfileCompletion(user);
                };
                reader.readAsDataURL(file);
            }
        }

        // ç¼–è¾‘ä¸ªäººç®€ä»‹
        function editBio() {
            const currentBio = AuthManager.getCurrentUser().bio || '';
            const newBio = prompt('ç¼–è¾‘ä¸ªäººç®€ä»‹ï¼ˆæœ€å¤š200å­—ï¼‰ï¼š', currentBio);
            
            if (newBio !== null) {
                if (newBio.length > 200) {
                    showToast('ä¸ªäººç®€ä»‹ä¸èƒ½è¶…è¿‡200å­—', 'error');
                    return;
                }

                const user = AuthManager.getCurrentUser();
                user.bio = newBio;
                AuthManager.updateUser(user);
                
                loadUserProfile();
                showToast('ä¸ªäººç®€ä»‹æ›´æ–°æˆåŠŸ', 'success');
            }
        }

        // ç¼–è¾‘èµ„æ–™
        function editProfile() {
            const user = AuthManager.getCurrentUser();
            
            // å¡«å……è¡¨å•æ•°æ®
            document.getElementById('editNickname').value = user.nickname || '';
            document.getElementById('editBirthday').value = user.birthday || '';
            document.getElementById('editCity').value = user.city || '';
            document.getElementById('editOccupation').value = user.occupation || '';
            document.getElementById('editCompany').value = user.company || '';
            document.getElementById('editBioText').value = user.bio || '';
            
            // è®¾ç½®æ€§åˆ«
            const genderRadios = document.querySelectorAll('input[name="editGender"]');
            genderRadios.forEach(radio => {
                radio.checked = radio.value === user.gender;
            });

            // æ˜¾ç¤ºå¼¹çª—
            document.getElementById('editModal').style.display = 'flex';
        }

        // ä¿å­˜èµ„æ–™
        function saveProfile() {
            const nickname = document.getElementById('editNickname').value.trim();
            const birthday = document.getElementById('editBirthday').value;
            const city = document.getElementById('editCity').value.trim();
            const occupation = document.getElementById('editOccupation').value.trim();
            const company = document.getElementById('editCompany').value.trim();
            const bio = document.getElementById('editBioText').value.trim();
            const gender = document.querySelector('input[name="editGender"]:checked')?.value;

            // éªŒè¯å¿…å¡«å­—æ®µ
            if (!nickname) {
                showToast('è¯·è¾“å…¥æ˜µç§°', 'error');
                return;
            }

            if (nickname.length > 20) {
                showToast('æ˜µç§°ä¸èƒ½è¶…è¿‡20ä¸ªå­—ç¬¦', 'error');
                return;
            }

            if (bio.length > 200) {
                showToast('ä¸ªäººç®€ä»‹ä¸èƒ½è¶…è¿‡200å­—', 'error');
                return;
            }

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            showLoading(true);

            // æ¨¡æ‹Ÿä¿å­˜å»¶è¿Ÿ
            setTimeout(() => {
                const user = AuthManager.getCurrentUser();
                user.nickname = nickname;
                user.gender = gender;
                user.birthday = birthday;
                user.city = city;
                user.occupation = occupation;
                user.company = company;
                user.bio = bio;

                AuthManager.updateUser(user);
                
                showLoading(false);
                closeModal();
                loadUserProfile();
                showToast('èµ„æ–™ä¿å­˜æˆåŠŸ', 'success');
            }, 1000);
        }

        // å…³é—­å¼¹çª—
        function closeModal() {
            document.getElementById('editModal').style.display = 'none';
        }

        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        function showLoading(show) {
            document.getElementById('loadingOverlay').style.display = show ? 'flex' : 'none';
        }

        // å…¶ä»–åŠŸèƒ½
        function goBack() {
            window.history.back();
        }

        function openSettings() {
            showToast('è®¾ç½®åŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }

        function editPhotos() {
            showToast('ç…§ç‰‡ç®¡ç†åŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }

        function editInterests() {
            showToast('å…´è¶£çˆ±å¥½åŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }

        function changePassword() {
            const currentPassword = prompt('è¯·è¾“å…¥å½“å‰å¯†ç ï¼š');
            if (!currentPassword) return;

            const user = AuthManager.getCurrentUser();
            if (currentPassword !== user.password) {
                showToast('å½“å‰å¯†ç é”™è¯¯', 'error');
                return;
            }

            const newPassword = prompt('è¯·è¾“å…¥æ–°å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰ï¼š');
            if (!newPassword) return;

            if (newPassword.length < 6) {
                showToast('å¯†ç è‡³å°‘éœ€è¦6ä½', 'error');
                return;
            }

            const confirmPassword = prompt('è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ï¼š');
            if (newPassword !== confirmPassword) {
                showToast('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´', 'error');
                return;
            }

            user.password = newPassword;
            AuthManager.updateUser(user);
            showToast('å¯†ç ä¿®æ”¹æˆåŠŸ', 'success');
        }

        function bindEmail() {
            const email = prompt('è¯·è¾“å…¥è¦ç»‘å®šçš„é‚®ç®±ï¼š');
            if (!email) return;

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showToast('è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€', 'error');
                return;
            }

            const user = AuthManager.getCurrentUser();
            user.email = email;
            AuthManager.updateUser(user);
            showToast('é‚®ç®±ç»‘å®šæˆåŠŸ', 'success');
        }

        function privacySettings() {
            showToast('éšç§è®¾ç½®åŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }

        function notifications() {
            showToast('æ¶ˆæ¯é€šçŸ¥åŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }

        function feedback() {
            showToast('æ„è§åé¦ˆåŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }

        function about() {
            alert('é¢‘é‡ v1.0.0\n\nä¸€ä¸ªä¸“æ³¨äºçœŸå®ç¤¾äº¤çš„å¹³å°\nè®©æ¯ä¸€æ¬¡ç›¸é‡éƒ½æœ‰æ„ä¹‰');
        }

        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                AuthManager.logout();
                window.location.href = 'login.html';
            }
        }

        // æ¶ˆæ¯æç¤º
        function showToast(message, type = 'info') {
            // åˆ›å»ºtoastå…ƒç´ 
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            
            // æ·»åŠ æ ·å¼
            Object.assign(toast.style, {
                position: 'fixed',
                top: '20px',
                left: '50%',
                transform: 'translateX(-50%)',
                padding: '12px 24px',
                borderRadius: '8px',
                color: 'white',
                fontSize: '14px',
                zIndex: '10000',
                opacity: '0',
                transition: 'opacity 0.3s ease'
            });

            // è®¾ç½®èƒŒæ™¯è‰²
            switch (type) {
                case 'success':
                    toast.style.backgroundColor = '#4CAF50';
                    break;
                case 'error':
                    toast.style.backgroundColor = '#f44336';
                    break;
                case 'warning':
                    toast.style.backgroundColor = '#ff9800';
                    break;
                default:
                    toast.style.backgroundColor = '#2196F3';
            }

            document.body.appendChild(toast);

            // æ˜¾ç¤ºåŠ¨ç”»
            setTimeout(() => {
                toast.style.opacity = '1';
            }, 100);

            // è‡ªåŠ¨éšè—
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }

        // ç»Ÿä¸€å¯¼èˆªæ å·²é€šè¿‡navbar-loader.jsè‡ªåŠ¨åŠ è½½
        
        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadUserProfile();
        });

        // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('editModal');
            if (event.target === modal) {
                closeModal();
            }
        });
    </script>
    
    <!-- åŠ è½½ç»Ÿä¸€å¯¼èˆªæ  -->
    <script src="components/navbar-loader.js"></script>
</body>
</html>